@inject AuthenticationStateProvider AuthenticationStateProvider
@inject IActividadesInterface ActividadesService

<div id="modal" class="modal" style='display: @(ActivarModal ? "block" : "none")'>
    <div class="modal-content">
        <EditForm Model="@actividades" OnValidSubmit="ActualizarListaActividades">
            <ObjectGraphDataAnnotationsValidator/>
        <div class="modal-header d-flex justify-content-center text-primary">
            <span class="blue-dark-text ms-3 text-23-book title-activity"><span>Actividades</span> <img src="images/Actividades/Icono-actividades.png" /></span>
        </div>

        <div class="modal-body d-flex row g-2 text-center ">
            <div class="row text-15-book">
                <div class="col-md-6 d-flex align-items-center justify-content-center">
                    <span class="blue-dark-text fw-bold">Base de datos de actividades</span>
                </div>
                <div class="col-md-6 d-flex">
                    <button class="search-icon-change text-light d-flex align-items-center">
                        <img src="images/Home/Buscador.png" class="w-100"/>
                    </button>
                        <BuscarActividad Texto="RecibirTexto"></BuscarActividad>

                </div>
            </div>
            <div class="container-fluid mt-4 text-20-bold">
                    <div class="row green-text">
                    <div class="col-md-3">
                        <label class="ms-4 text-center w-75 " for="">Código de Act.</label>
                    </div>
                    <div class="col-md-3">
                        <label class="pe-4 text-center w-100" for="">Nombre</label>
                    </div>
                    <div class="col-md-3">
                        <label class="pe-4 text-center w-100 " for="">CI-Referencia</label>
                    </div>
                    <div class="col-md-3">
                        <label class="text-end w-50" for="">Horas</label>
                    </div>
                </div>
            </div>
            <div class="max-height-activity overflow-y-auto overflow-x-hidden scrollbar-modal-activity">
            @if(actividades != null)
            {
                        var listaActividades = actividades;
                        if (!string.IsNullOrEmpty(textoRecibido))
                        {
                            // Filtrar la lista de clientes por el nombre que contenga el texto de búsqueda
                            listaActividades = listaActividades.Where(actividad => actividad.Actividad.IndexOf(textoRecibido, StringComparison.OrdinalIgnoreCase) >= 0).ToList();
                        }
                   
                foreach (var actividad in listaActividades)
                {

                   
                    <div class="row mb-2 mt-2 text-16-book">
                        <div class="col-md-3">
                            <input class="w-75 text-center text-secondary border-success rounded-pill" type="text" @bind-value="@actividad.codigo" readonly>
                        </div>
                        <div class="col-md-3">
                            <input class="w-100 text-center blue-dark-text border-primary rounded-pill" type="text" @bind-value="@actividad.Actividad" @oninput="(e) => CambioActividadNombre(e, actividad.Id)">
                              <ValidationMessage For="@(() => actividad.Actividad)" />
                        </div>
                         
                        <div class="col-md-3">
                            <input class="w-100 text-center text-secondary border-success rounded-pill" type="text" @bind-value="@actividad.CI_referencia" @oninput="(e) => CambioCIReferencia(e, actividad.Id)">
                             <ValidationMessage For="@(() => actividad.CI_referencia)"  />
                        </div>
                       
                        <div class="col-md-3">
                            <input class="w-50 text-center text-secondary border-success rounded-pill" type="text" @bind-value="@actividad.horas" @oninput="(e) => CambioHoras(e, actividad.Id)">
                            <ValidationMessage For="@(() => actividad.horas)"  />
                        </div>
                       
                    </div>
                      
                }
            }
            </div>
        </div>

    <div class="modal-footer text-12-medium">
        <div @onclick="() => CloseModal()" class="button-footer mouse-pointer rounded-pill border border-primary blue-dark-bg text-light mx-4" id="descartar">Descartar cambios</div>
        <button type="submit" class="button-footer rounded-pill border border-success green-bg text-light mx-4" id="guardar">Guardar cambios</button>
    </div>
    </EditForm>
    </div>
</div>


